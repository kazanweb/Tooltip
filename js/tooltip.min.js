!function(t,a,n){"use strict";function e(t,e,o){var s,i;for(i in s=document.createElement(t),e)e.hasOwnProperty(i)&&s.setAttribute(i,e[i]);return o&&o.appendChild(s),s}var i,r,l,h,f,d,g,s,c,o,u=/Android|iPhone|iPad|iPod|BlackBerry|WPDesktop|IEMobile|Opera Mini/i.test(navigator.userAgent)?"touchend":"mouseup";i=function(t,e,o){t.style.left="auto",t.style.right="auto",e.style.right="auto",e.style.left="auto";var s=o.right+o.width/2-t.offsetWidth/2;return s<0||document.body.offsetWidth<=t.offsetWidth?(e.style.right=o.right+o.width/2+"px",void(t.style.right="0px")):o.left+o.width/2-t.offsetWidth/2<0||document.body.offsetWidth<=t.offsetWidth?(e.style.left=o.left+o.width/2+"px",void(t.style.left="0px")):(e.style.right=o.right-s+o.width/2+"px",void(t.style.right=s+"px"))},r=function(t,e,o,s){e.className=o.mainClassName+"__arrow "+o.mainClassName+"__arrow_bottom",i(t,e,s),t.style.top=window.pageYOffset+s.top-t.offsetHeight-o.offset+"px"},l=function(t,e,o,s){e.className=o.mainClassName+"__arrow "+o.mainClassName+"__arrow_top",i(t,e,s),t.style.top=window.pageYOffset+s.top+s.height+o.offset+"px"},h=function(t,e,o,s){e.className=o.mainClassName+"__arrow "+o.mainClassName+"__arrow_right",g(t,e,o,s)&&(t.style.top=window.pageYOffset+s.top+s.height/2-t.offsetHeight/2+"px")},f=function(t,e,o,s){e.className=o.mainClassName+"__arrow "+o.mainClassName+"__arrow_left",d(t,e,o,s)&&(t.style.top=window.pageYOffset+s.top+s.height/2-t.offsetHeight/2+"px")},d=function(t,e,o,s){t.style.right="";var i=s.right-t.offsetWidth-o.offset;return i<0&&(i=s.right+s.width+o.offset,e.className=o.mainClassName+"__arrow "+o.mainClassName+"__arrow_right"),s.width+t.offsetWidth>=document.body.clientWidth?(0<s.top-o.offset-t.offsetHeight?r(t,e,o,s):l(t,e,o,s),!1):(t.style.right=i+"px",!0)},g=function(t,e,o,s){var i;return t.style.right="",i=s.right+s.width+o.offset,e.className=o.mainClassName+"__arrow "+o.mainClassName+"__arrow_right",s.width+t.offsetWidth>=document.body.clientWidth?(0<s.top-o.offset-t.offsetHeight?r(t,e,o,s):l(t,e,o,s),!1):(t.style.right=i+"px",!0)},s=function(t,e,o,s){var i=function(t){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,right:document.body.offsetWidth-e.right,bottom:window.innerHeight-e.bottom,width:e.width,height:e.height}}(t);o.style.cssText="","right"!==s.position?"left"!==s.position?"top"!==s.position?"bottom"!==s.position||(i.top+i.height+s.offset+e.offsetHeight<window.innerHeight?l(e,o,s,i):r(e,o,s,i)):0<i.top-s.offset-e.offsetHeight?r(e,o,s,i):i.top-s.offset+e.offsetHeight+t.offsetHeight>document.body.scrollHeight-window.pageYOffset?r(e,o,s,i):l(e,o,s,i):h(e,o,s,i):f(e,o,s,i)},(c=function(t){this.values={},this.values.triggerClose=!1,this.values.curentTooltip=!1,this.values.mainClassName=t,this.tags={},this.tags.tooltip=e("div",{class:t}),this.tags.tooltip__arrow=e("div",{class:t+"__arrow"},this.tags.tooltip),this.tags.tooltip__section=e("div",{class:t+"__section"},this.tags.tooltip),this.tags.tooltip__close=e("div",{class:t+"__close"},this.tags.tooltip__section),this.tags.tooltip__text=e("div",{class:t+"__text"},this.tags.tooltip__section)}).prototype={constructor:c,init:function(t,e){return t&&(this.tags.element=t,e=e||{},this.opts=function(t,e){var o;for(o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}({modClass:"",offset:5,close:!0,position:"top",closeButtons:""},e),this.opts.mainClassName=this.values.mainClassName,this.events()),this},events:function(){var e=this;e.opts.close?e.tags.tooltip__close.style.display="block":e.tags.tooltip__close.style.display="none",this.tags.tooltip__close.addEventListener(u,function(t){t.stopPropagation(),e.close()})},html:function(t){return this.tags.element&&(this.tags.tooltip__text.innerHTML=t),this},show:function(){if(!this.tags.element)return this;function t(){this.opts.modClass&&this.tags.tooltip.classList.add(this.opts.modClass),document.body.insertBefore(this.tags.tooltip,document.body.firstChild),s(this.tags.element,this.tags.tooltip,this.tags.tooltip__arrow,this.opts),window.addEventListener("resize",function(){s(o.tags.element,o.tags.tooltip,o.tags.tooltip__arrow,o.opts)}),o.opts.closeButtons&&o.opts.closeButtons.split(",").forEach(function(t){var e=document.querySelectorAll(t);e&&[].forEach.call(e,function(t){t.addEventListener(u,function(t){t.preventDefault(),o.close()})})}),setTimeout(function(){o.tags.tooltip.classList.add("active")},10),this.values.triggerClose=!0}var o=this,e=this.tags.tooltip__text.querySelectorAll("img");return e.length?$(e).on("load",function(){t.call(o)}):t.call(o),this},updatePosition:function(){return this.tags.element&&s(this.tags.element,this.tags.tooltip,this.tags.tooltip__arrow,this.opts),this},close:function(){if(!this.tags.element)return this;var t=this;return this.values.triggerClose?(this.tags.tooltip.classList.remove("active"),setTimeout(function(){t.opts.modClass&&t.tags.tooltip.classList.remove(t.opts.modClass),document.body.removeChild(t.tags.tooltip)},200),this.values.triggerClose=!1,this):void 0}},t.Tooltip=c,o=function(){var o,s,i;s=new c(a),document.body.addEventListener("mouseenter",function(e){e.target.matches(n)&&(o=setTimeout(function(){var t={modClass:e.target.getAttribute("data-modclass")||"",position:e.target.getAttribute("data-pos")||"top",event:e.target.getAttribute("data-event")||"hover",offset:parseInt(e.target.getAttribute("data-offset"))||5,close:!1};"hover"===t.event&&s.init(e.target,t).html(e.target.getAttribute("data-text")).show()},300))},!0),document.body.addEventListener("mouseleave",function(t){t.target.matches(n)&&(clearTimeout(o),"hover"!==t.target.getAttribute("data-event")&&t.target.getAttribute("data-event")||s.close())},!0),document.body.addEventListener("touchstart",function(){i=!1}),document.body.addEventListener("touchmove",function(){i=!0}),document.body.addEventListener(u,function(t){if(!i)if(t.target.matches(n)){if(t.preventDefault(),"click"===t.target.getAttribute("data-event")||"touchend"==u){var e={modClass:t.target.getAttribute("data-modclass")||"",position:t.target.getAttribute("data-pos")||"top",offset:parseInt(t.target.getAttribute("data-offset"))||5,closeButtons:".js-close-tooltip",close:!0};s.values.triggerClose&&s.values.curentTooltip===t.target?s.close():(s.values.curentTooltip=t.target,s.init(t.target,e).html(t.target.getAttribute("data-text")).show())}}else t.target.closest("."+a)||s.close()},!0)},document.addEventListener("DOMContentLoaded",o)}(window,"tooltip","[data-tooltip]");